/*
 * uw.Library
 * Version 1.1 (25/10/2014)
 * Copyright 2014 Kajetan Hryńczuk and Damian Sobkowiak.  
 * All Rights Reserved.  
 * Use, reproduction, distribution, and modification of this code is subject to the terms and 
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 *
 * Author: Kajetan Hryńczuk and Damian Sobkowiak
 * Project: https://github.com/unpxre/uw.Library
 */
 

function uw_photo(e,t){if($("#uw_photo_box, #uw_photo_curtain").hasClass("dn")){$("#uw_photo_box").css("marginTop","0px").css("marginLeft","0px").css("width","0px").css("height","0px")}if($("#uw_photo_box, #uw_photo_curtain").hasClass("dn"))$("#uw_photo_curtain").css("opacity","0").removeClass("dn").animate({opacity:"1"},300);$("#uw_photo_box img").attr("src",e).load(function(){$("#uw_photo_curtain i").addClass("dn");$("#uw_photo_box h3").text("");$("#uw_photo_box h3").text($(".uw_photo_index_"+t).attr("alt"));$(".uw_fillpath .prev").attr("href",$(".uw_photo_index_"+(t-1)).parent().attr("href"));$(".uw_fillpath .next").attr("href",$(".uw_photo_index_"+(t+1)).parent().attr("href"));if($(".uw_fillpath .next").attr("href").indexOf('ascript:uw_photo("undefined')>0||$(".uw_fillpath .next").attr("href")=="")$(".uw_fillpath .next").attr("href","javascript:;");if($(".uw_fillpath .prev").attr("href").indexOf('ascript:uw_photo("undefined')>0||$(".uw_fillpath .prev").attr("href")=="")$(".uw_fillpath .next").attr("prev","javascript:;");$("#uw_max_photo").parent().attr("href",e);var n=document.querySelector("#uw_photo_box img").naturalHeight;var r=document.querySelector("#uw_photo_box img").naturalWidth;var i=parseInt($(window).width()*.9);var s=parseInt($(window).height()-80);while(n>s||r>i){n=parseInt(n*.9);r=parseInt(r*.9)}$("#uw_photo_box").animate({marginTop:"-"+parseInt(n/2+25)+"px",marginLeft:"-"+parseInt(r/2+10)+"px",width:r+20+"px",height:n+50+"px"},{duration:300,queue:false});if($("#uw_photo_box, #uw_photo_curtain").hasClass("dn"))$("#uw_photo_box").css("opacity","0").removeClass("dn").animate({opacity:"1"},500)}).error(function(){alert("ERR!\n\nBAD IMAGE PATH OR SERVER OFFLINE");$("#uw_photo_box, #uw_photo_curtain").addClass("dn");$("#uw_photo_curtain i").removeClass("dn")})}function hide_unotify(e){$("#unotify_"+e+"").addClass("unotify_hide");setTimeout(function(){$("#unotify_"+e+"").remove()},400)}function create_unotify(e,t){var n=unotify_num;++unotify_num;switch(t){case"alert":var r="unotify_alert";break;case"ok":var r="unotify_ok";break;case"warning":var r="unotify_warning";break;case"nat":var r="unotify_nat";break;case"error":var r="unotify_error";break;default:var r="unotify_info";break}$("body").append('<div id="notify_test_box" style="width: auto; display: inline-block;">'+e+"</div>");var i=$("#notify_test_box").width();$("#notify_test_box").remove();if(i<=unotify_max_width)e=e.replace(/ /g,"&nbsp;");$("#unotify_box").append('<div class="unotify '+r+'" id="unotify_'+n+'"><div class="unotify_image"></div><span>'+e+'</span><div class="clear hx0"></div></div>');if(i>unotify_max_width)$("#unotify_"+n).find("span").css("height","auto").css("minHeight","60px").css("borderBottom","10px solid #fff");setTimeout(function(){hide_unotify(n)},9e3)}function ualert(e){create_unotify(e,"alert")}function uok(e){create_unotify(e,"ok")}function uinfo(e){create_unotify(e,"info")}function uwarning(e){create_unotify(e,"warning")}function promocja(e){create_unotify(e,"nat")}function uerror(e){create_unotify(e,"error")}function uvalidate(e){var t=$(e).attr("validtype");var n="";if(typeof t!==typeof undefined&&t!==false){if($(e).attr("validtype")=="num"){var r=parseInt($(e).val());if(isNaN(r)){n+="Wartość w polu: "+$(e).attr("validfieldname")+" nie jest liczbą.\n"}if($(e).attr("minnum")>r){n+="Wartość: "+r+" w polu: "+$(e).attr("validfieldname")+" jest za mała, minimum to: "+$(e).attr("minnum")+"\n"}if($(e).attr("maxnum")<r){n+="Wartość: "+r+" w polu: "+$(e).attr("validfieldname")+" jest za duża, maximum to: "+$(e).attr("maxnum")+"\n"}}else if($(e).attr("validtype")=="len"){var i=$(e).val().length;if($(e).attr("minlen")>i){n+="Ilość znaków: "+i+" w polu: "+$(e).attr("validfieldname")+" jest za krótka, minimum to: "+$(e).attr("minlen")+"\n"}if($(e).attr("maxlen")<i){n+="Ilość znaków: "+i+" w polu: "+$(e).attr("validfieldname")+" jest za duża, maximum to: "+$(e).attr("maxlen")+"\n"}}else if($(e).attr("validtype")=="mail"){var s=$(e).val();var o=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!o.test(s)){n+="Podano błędny e-mail w polu: "+$(e).attr("validfieldname")+"\n"}}else if($(e).attr("validtype")=="select"){if($(e).val()==$(e).attr("defaultval")){n+="Nie wybrano wartości w liście wyboru: "+$(e).attr("validfieldname")+"\n"}}else if($(e).attr("validtype")=="checkbox"){if(!$(e).prop("checked")){n+="Musisz zaznaczyć pole: "+$(e).attr("validfieldname")+"\n"}}else uerror("ERR! bad validtype")}return n}function check_form(e){var t=false;$(e).each(function(e){msg=uvalidate(this);if(msg.length>0){$(this).addClass("bad").removeClass("good");uwarning(msg);t=true}else $(this).addClass("good").removeClass("bad")});if(t)return false;return true}$(document).ready(function(){$(".uw_photo").each(function(e,t){$(this).addClass("uw_photo_index_"+e).parent().attr("orgin_href",$(this).parent().attr("href")).attr("href",'javascript:uw_photo("'+$(this).parent().attr("href")+'", '+e+");")});$("body").append('<div id="uw_photo_curtain" class="dn"> <i class="fa fa-spinner fa-spin fs36 " style="color: #fff; z-index: 999; left: 50%; top: 50%; position: fixed;"></i> </div>'+' <div id="uw_photo_box" class="dn"> <img src="">  <nav class="uw_fillpath"><a class="prev" href=""><span class="uw_ico_wrap"></span></a><a class="next" href=""><span class="uw_ico_wrap"></span></a></nav>'+' <h3></h3> <div id="uw_close_gallery"></div> <a href="" target="_blank"><div id="uw_max_photo"></div></a> </div> </div>');$("#uw_photo_curtain, #uw_close_gallery").click(function(){$("#uw_photo_box, #uw_photo_curtain").addClass("dn");$("#uw_photo_curtain i").removeClass("dn")});$(window).resize(function(){var e=document.querySelector("#uw_photo_box img").naturalHeight;var t=document.querySelector("#uw_photo_box img").naturalWidth;var n=parseInt($(window).width()*.9);var r=parseInt($(window).height()-80);while(e>r||t>n){e=parseInt(e*.9);t=parseInt(t*.9)}$("#uw_photo_box").css("marginTop","-"+parseInt(e/2+25)+"px").css("marginLeft","-"+parseInt(t/2+10)+"px");$("#uw_photo_box").css("width",t+20+"px").css("height",e+50+"px")});var e=false;$("body").on("DOMSubtreeModified",function(){if(!e){e=true;setTimeout(function(){e=false;$(".uw_photo").each(function(e,t){$(this).parent().attr("href",$(this).parent().attr("orgin_href")).attr("orgin_href","")});$(".uw_photo").each(function(e,t){$(this).addClass("uw_photo_index_"+e).parent().attr("orgin_href",$(this).parent().attr("href")).attr("href",'javascript:uw_photo("'+$(this).parent().attr("href")+'", '+e+");")})},200)}});$("a").mousedown(function(e){if(e.which==2&&$(this).children().hasClass("uw_photo")){e.preventDefault();window.open($(this).attr("orgin_href"));return false}return true})});$(document).keydown(function(e){if(!$("#uw_photo_box, #uw_photo_curtain").hasClass("dn")){switch(e.which){case 37:eval($(".uw_fillpath .prev").attr("href").replace("javascript:",""));break;case 39:eval($(".uw_fillpath .next").attr("href").replace("javascript:",""));break;case 27:$("#uw_photo_box, #uw_photo_curtain").addClass("dn");$("#uw_photo_curtain i").removeClass("dn");break;default:return}e.preventDefault()}});var cloud_width=0;var bname=navigator.appName;if(bname=="Microsoft Internet Explorer")var its_wide=screen.width;else its_wide=window.innerWidth;$(document).ready(function(){$("body").append('<div id="cloud"></div>')});$(document).on("mouseover",".ucloud",function(e){var t=window.innerWidth;var n=window.innerHeight;var r=$(this).attr("cloudstyle");if(typeof r!==typeof undefined&&r!==false)$("#cloud").addClass($(this).attr("cloudstyle"));else $("#cloud").addClass("default_cloud");$("#cloud").html($(this).attr("cloudcontent"));blockmargin=0;$("#cloud").css("marginTop",e.pageY-parseInt($("#cloud").height()/2)-30-n/2).css("marginLeft",e.pageX+blockmargin+39-t/2).css("display","block")});$(document).on("mousemove",".ucloud",function(e){var t=window.innerWidth;var n=window.innerHeight;$("#cloud").css("marginTop",e.pageY-parseInt($("#cloud").height()/2)-30-n/2).css("marginLeft",e.pageX+blockmargin+39-t/2)});$(document).on("mouseout",".ucloud",function(){$("#cloud").css("display","none").removeClass()});var unotify_num=0;var unotify_max_width=200;$(document).ready(function(){$("body").append('<div id="unotify_box"></div>')});$(document).on("click",".unotify",function(){hide_unotify($(this).attr("id").replace("unotify_",""))});$(document).on("focusout","input[type=text]",function(){if($(this).val().length==0)return"";msg=uvalidate(this);if(msg.length>0){$(this).addClass("bad").removeClass("good");uwarning(msg)}else $(this).addClass("good").removeClass("bad")});$(document).on("change","select",function(){msg=uvalidate(this);if(msg.length>0){$(this).addClass("bad").removeClass("good");uwarning(msg)}else $(this).addClass("good").removeClass("bad")});$(document).on("click","input[type=checkbox]",function(){msg=uvalidate(this);if(msg.length>0)uwarning(msg)});$(document).on("submit, click",".validate",function(e){var t=$(this).attr("validclass");if(typeof t!==typeof undefined&&t!==false){$("."+t).each(function(t){msg=uvalidate(this);if(msg.length>0){$(this).addClass("bad").removeClass("good");uwarning(msg);e.preventDefault()}else $(this).addClass("good").removeClass("bad")})}else{uerror("ERR! empty validclass ");e.preventDefault()}})
